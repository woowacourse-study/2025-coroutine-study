# 일시 중단 함수(suspend)

## 일시 중단 함수의 개념

- 코루틴의 비동기 작업과 관련된 복잡한 코드들을 구조화하고 재사용할 수 있는 코드의 집합으로 만드는데 사용

> ‼️ 일시중단 함수는 코루틴이 아니다.

- 메서드를 사용한다고 하더라도 코루틴이 열리지 않고 스레드를 양보하는 것도 없어 서브루틴처럼 실행이 된다.

```kotlin
fun main() = runBlocking<Unit> {
    val startTime = System.currentTimeMillis()
    delayAndPrintHello()
    delayAndPrintHello()
    println(getElapsedTime(startTime))
}

suspend fun delayAndPrintHello(){
    delay(1000L)
    println("Hello")
}
```
다음은 suspend를 코루틴이라고 잘못 사용된 예제이다. 스레드의 양보로 인해 1초면 될 것 같지만 단순히 코드들의 나열일 뿐이다.

```kotlin
fun main() = runBlocking<Unit> {
    val startTime = System.currentTimeMillis()
    val a = launch {
        delayAndPrintHello()
    }
    val b = launch {
        delayAndPrintHello()
    }
    joinAll(a, b)
    println(getElapsedTime(startTime))
}

suspend fun delayAndPrintHello(){
    delay(1000L)
    println("Hello")
}
```

다음과 같이 suspend 메서드를 코루틴 블럭으로 감싸게 된다면 1초 정도만 걸리는 것을 알 수 있다.

## 일시 중단 함수의 사용

### 일시 중단 함수의 호출 가능 지점

- 코루틴 내부에서 일시 중단 함수 호출

> 위의 launch 내부에 suspend 메서드를 호출한 것이 그 예이다.

- 일시 중단 함수 내부에서 다른 일시 중단 함수 호출하기

> ‼️ 호출할 때에 주의할 점은 빌더 함수와 호출할 때에는 Scope를 열어서 사용해야 한다는 점이다.

## 예외 전파 제한

> supervisorScope를 통하여 예외가 발생될 경우 코루틴 전체가 취소 되지 않게 한다.


